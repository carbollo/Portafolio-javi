import"./modulepreload-polyfill-B5Qt9EMX.js";let u=0,f=!1;window.addEventListener("load",()=>{document.body.classList.add("custom-cursor-active");const o=document.getElementById("loader");o&&(o.style.opacity="0",setTimeout(()=>{o.style.display="none"},800)),q(),R(),P(),W(),L(),H(),window.addEventListener("pageshow",e=>{if(e.persisted){document.querySelectorAll('.portal-card[style*="fixed"]').forEach(r=>r.remove());const a=document.getElementById("loader");a&&(a.style.display="none"),document.body.classList.remove("no-scroll"),document.querySelectorAll(".portal-card").forEach(r=>{const l=r.querySelectorAll(".portal-title, .portal-number, .portal-desc");gsap.to(l,{opacity:1,duration:.2})}),gsap.to(".app-container",{opacity:1,duration:.2})}}),document.querySelectorAll('.portal-card[style*="fixed"]').forEach(e=>e.remove())});function H(){document.querySelectorAll(".portal-card").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=t.getAttribute("href"),a=t.getBoundingClientRect(),n=t.cloneNode(!0);n.style.position="fixed",n.style.top=a.top+"px",n.style.left=a.left+"px",n.style.width=a.width+"px",n.style.height=a.height+"px",n.style.zIndex="99999",n.style.transition="none",n.style.margin="0",n.style.transform="translateZ(0)",n.style.backfaceVisibility="hidden",n.style.willChange="top, left, width, height, opacity",document.body.appendChild(n);const r=n.querySelector(".portal-title"),l=n.querySelector(".portal-number"),d=n.querySelector(".portal-desc");gsap.to([r,l,d],{opacity:0,scale:.9,duration:.4,ease:"power2.out"});const w=t.querySelectorAll(".portal-title, .portal-number, .portal-desc");gsap.to(w,{opacity:0,duration:.4}),gsap.to(n,{top:0,left:0,width:"100vw",height:window.innerHeight,padding:"4rem",backgroundColor:"#000",borderRadius:0,borderColor:"rgba(255,255,255,0)",duration:1,ease:"power4.inOut",onComplete:()=>{window.location.href=i}}),gsap.to(".app-container",{opacity:0,duration:.5})})})}function L(){if(window.innerWidth<=768)return;window.addEventListener("wheel",o,{passive:!1}),window.addEventListener("touchmove",t=>{window.innerWidth>768&&t.preventDefault()},{passive:!1});function o(t){if(t.preventDefault(),f)return;const e=t.deltaY>0?1:-1;e===1&&u===0?m(1):e===-1&&u===1&&m(0)}window.addEventListener("keydown",t=>{f||(t.key==="ArrowDown"||t.key==="PageDown"?u===0&&m(1):(t.key==="ArrowUp"||t.key==="PageUp")&&u===1&&m(0))}),window.addEventListener("resize",()=>{u===1&&gsap.set(".app-container",{y:-window.innerHeight})})}function m(o){f=!0,u=o,gsap.to(".app-container",{y:-window.innerHeight*o,duration:1.5,ease:"power3.inOut",onComplete:()=>{f=!1}}),o===1?gsap.to(".hero-scroll-hint",{opacity:0,duration:.5,ease:"power2.out"}):gsap.to(".hero-scroll-hint",{opacity:.5,duration:.8,delay:.5,ease:"power2.out"})}function q(){const o=document.getElementById("webgl");if(!o)return;const t=new THREE.Scene;t.fog=new THREE.FogExp2(0,5e-4);const e=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e3);e.position.z=0,e.rotation.x=0;const i=new THREE.WebGLRenderer({canvas:o,alpha:!0});i.setSize(window.innerWidth,window.innerHeight),i.setPixelRatio(Math.min(window.devicePixelRatio,2));function a(){const s=document.createElement("canvas");s.width=32,s.height=32;const p=s.getContext("2d"),c=p.createRadialGradient(16,16,0,16,16,16);return c.addColorStop(0,"rgba(255, 255, 255, 1)"),c.addColorStop(.4,"rgba(220, 240, 255, 0.8)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),p.fillStyle=c,p.beginPath(),p.arc(16,16,16,0,Math.PI*2),p.fill(),new THREE.CanvasTexture(s)}const n=4e3,r=new Float32Array(n*3),l=new Float32Array(n);for(let s=0;s<n;s++)r[s*3]=(Math.random()-.5)*2e3,r[s*3+1]=(Math.random()-.5)*2e3,r[s*3+2]=(Math.random()-.5)*2e3,l[s]=1+Math.random();const d=new THREE.BufferGeometry;d.setAttribute("position",new THREE.BufferAttribute(r,3));const w=a(),M=new THREE.PointsMaterial({size:2.5,map:w,transparent:!0,opacity:1,blending:THREE.AdditiveBlending,depthWrite:!1,sizeAttenuation:!0}),h=new THREE.Points(d,M);t.add(h);let v=0,x=0;document.addEventListener("mousemove",s=>{v=(s.clientX-window.innerWidth/2)*5e-4,x=(s.clientY-window.innerHeight/2)*5e-4});function S(){requestAnimationFrame(S);const s=d.attributes.position,p=s.array;for(let c=0;c<n;c++){let T=l[c]*1;p[c*3+2]+=T,p[c*3+2]>600&&(p[c*3+2]=-1400,p[c*3]=(Math.random()-.5)*2e3,p[c*3+1]=(Math.random()-.5)*2e3)}s.needsUpdate=!0,h.rotation.x+=(x-h.rotation.x)*.05,h.rotation.y+=(v-h.rotation.y)*.05,i.render(t,e)}S(),window.addEventListener("resize",()=>{e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)})}function R(){const o=document.querySelector(".hero-title");o&&(o.querySelectorAll("span").forEach(t=>{t.querySelector(".letter")||(t.innerHTML=t.textContent.replace(/\S/g,"<span class='letter'>$&</span>"))}),anime.timeline({loop:!1}).add({targets:".hero-title .letter",translateY:["1.2em",0],translateZ:0,opacity:[0,1],duration:750,delay:(t,e)=>50*e,easing:"easeOutExpo"})),anime({targets:".hero-subtitle",opacity:[0,1],translateY:[20,0],duration:1e3,delay:800,easing:"easeOutExpo"}),anime({targets:".portal-card",translateY:[50,0],opacity:[0,1],delay:anime.stagger(150,{start:1e3}),duration:800,easing:"easeOutCubic"}),anime({targets:".main-footer",opacity:[0,.5],duration:1e3,delay:2e3,easing:"easeOutQuad"})}function P(){function o(){const e=document.createElement("div");e.classList.add("shooting-star");const i=Math.random()*Math.PI*2,a=50,n=window.innerWidth/2+Math.cos(i)*a,r=window.innerHeight/2+Math.sin(i)*a;e.style.left=n+"px",e.style.top=r+"px";const l=i*(180/Math.PI);e.style.transform=`rotate(${l}deg)`,document.body.appendChild(e),gsap.to(e,{x:Math.cos(i)*1e3,y:Math.sin(i)*1e3,opacity:1,duration:.1,ease:"power1.in",onComplete:()=>{gsap.to(e,{x:Math.cos(i)*1500,y:Math.sin(i)*1500,opacity:0,duration:.8,ease:"power2.out",onComplete:()=>e.remove()})}})}function t(){const e=3e3+Math.random()*4e3;setTimeout(()=>{o(),t()},e)}setTimeout(t,2e3)}const y=document.querySelector(".cursor");let g=window.innerWidth/2,E=window.innerHeight/2;const b=[],C=12;function W(){const o=document.querySelector(".cursor-trail");if(o){o.innerHTML="";for(let t=0;t<C;t++){const e=document.createElement("div");e.classList.add("cursor-dot"),o.appendChild(e),b.push({el:e,x:window.innerWidth/2,y:window.innerHeight/2})}A()}}document.addEventListener("mousemove",o=>{g=o.clientX,E=o.clientY,y&&gsap.to(y,{x:g,y:E,duration:.1,ease:"power2.out"})});function A(){let o=g,t=E;b.forEach((e,i)=>{const a=.35-i*.02;e.x+=(o-e.x)*a,e.y+=(t-e.y)*a,o=e.x,t=e.y,e.el.style.transform=`translate(${e.x}px, ${e.y}px) translate(-50%, -50%)`;const n=i/C;e.el.style.opacity=.8*(1-n);const r=1-n*.8;e.el.style.width=6*r+"px",e.el.style.height=6*r+"px"}),requestAnimationFrame(A)}document.querySelectorAll("a, .portal-card").forEach(o=>{o.addEventListener("mouseenter",()=>{y&&(y.style.transform="translate(-50%, -50%) scale(2.5)")}),o.addEventListener("mouseleave",()=>{y&&(y.style.transform="translate(-50%, -50%) scale(1)")})});document.addEventListener("DOMContentLoaded",async()=>{try{const t=await(await fetch("/api/projects")).json();t.reverse();const e={},i=["Moda","Conciertos","Gastronomia","Creativo","Otros"],a=r=>r&&r.includes("drive.google.com")&&(r.includes("/view")||r.includes("/preview"))?r.replace(/\/file\/d\/(.+)\/(view|preview).*/,"/uc?export=view&id=$1"):r;i.forEach(r=>{const l=t.find(d=>d.category===r);l&&l.thumbnail&&(e[r]=a(l.thumbnail))}),document.querySelectorAll(".portal-card").forEach(r=>{const l=r.querySelector(".portal-title").textContent.trim(),d=i.find(w=>w.toUpperCase()===l.toUpperCase());d&&e[d]&&r.style.setProperty("--hover-bg",`url('${e[d]}')`)})}catch(o){console.error("Error loading home backgrounds:",o)}});
